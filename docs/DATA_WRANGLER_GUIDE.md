# Data Wrangler ä½¿ç”¨æŒ‡å—

## ä»€ä¹ˆæ˜¯ Data Wranglerï¼Ÿ

**Data Wrangler** æ˜¯å¾®è½¯å®˜æ–¹ä¸º VS Code å¼€å‘çš„æ•°æ®åˆ†ææ‰©å±•ï¼Œä¸“ä¸ºæ•°æ®æ¢ç´¢å’Œæ¸…æ´—è®¾è®¡ã€‚

- ğŸ† **VS Code æ‰©å±•å¸‚åœºä¸‹è½½é‡æœ€é«˜çš„æ•°æ®å·¥å…·**
- ğŸ”§ ç”±å¾®è½¯å®˜æ–¹ç»´æŠ¤å’Œæ›´æ–°
- ğŸ“Š æ”¯æŒ CSVã€Excelã€JSONã€Parquet ç­‰å¤šç§æ ¼å¼
- ğŸ¨ æä¾›äº¤äº’å¼æ•°æ®æ¢ç´¢ç•Œé¢
- ğŸ è‡ªåŠ¨ç”Ÿæˆ Python/Pandas ä»£ç 

## å®‰è£…æ­¥éª¤

### 1. æ‰“å¼€ VS Code æ‰©å±•å¸‚åœº
- æŒ‰å¿«æ·é”® `Ctrl+Shift+X` (Windows/Linux)
- æˆ– `Cmd+Shift+X` (macOS)
- æˆ–ç‚¹å‡»å·¦ä¾§è¾¹æ çš„æ‰©å±•å›¾æ ‡

### 2. æœç´¢å¹¶å®‰è£…
1. åœ¨æœç´¢æ¡†è¾“å…¥: `Data Wrangler`
2. æ‰¾åˆ°å¾®è½¯å®˜æ–¹å‘å¸ƒçš„æ‰©å±•ï¼ˆä¼šæ˜¾ç¤º Microsoft æ ‡è¯†ï¼‰
3. ç‚¹å‡» **Install** æŒ‰é’®
4. ç­‰å¾…å®‰è£…å®Œæˆï¼ˆé€šå¸¸å‡ ç§’é’Ÿï¼‰

### 3. éªŒè¯å®‰è£…
å®‰è£…æˆåŠŸåï¼Œå³é”®ç‚¹å‡»ä»»ä½• `.csv` æˆ– `.parquet` æ–‡ä»¶ï¼Œåº”è¯¥ä¼šçœ‹åˆ° "Open in Data Wrangler" é€‰é¡¹ã€‚

## ä½¿ç”¨æ­¥éª¤

### æ‰“å¼€æ•°æ®æ–‡ä»¶

1. åœ¨ VS Code æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­æ‰¾åˆ°ä½ çš„ Parquet æ–‡ä»¶
   - ä¾‹å¦‚: `data/parquet/ashare_daily/year=2025/month=12/*.parquet`
   - æˆ–æµ‹è¯•æ–‡ä»¶: `data/test/test_000001.parquet`

2. **å³é”®ç‚¹å‡»**æ–‡ä»¶

3. é€‰æ‹© **"Open in Data Wrangler"**

4. æ•°æ®ä¼šåœ¨æ–°æ ‡ç­¾é¡µä¸­æ‰“å¼€

### ç•Œé¢ä»‹ç»

Data Wrangler ç•Œé¢åˆ†ä¸ºå‡ ä¸ªä¸»è¦åŒºåŸŸï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Wrangler                    [X]       â”‚  <- æ ‡é¢˜æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Operations | Chart | Export | Summary      â”‚  <- å·¥å…·æ 
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Data Grid (è¡¨æ ¼è§†å›¾)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ date â”‚ code   â”‚ close  â”‚ volume â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚ ...  â”‚ ...    â”‚ ...    â”‚ ...    â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ˆ Statistics Panel (ç»Ÿè®¡é¢æ¿)             â”‚
â”‚  - Missing values: 0                        â”‚
â”‚  - Unique values: 5792                      â”‚
â”‚  - Mean: 11.50                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®é¢„è§ˆ ğŸ“‹

**è¡¨æ ¼è§†å›¾**:
- è‡ªåŠ¨æ˜¾ç¤ºæ•°æ®çš„å‰ 1000 è¡Œ
- æ»šåŠ¨æŸ¥çœ‹æ›´å¤šæ•°æ®
- ç‚¹å‡»åˆ—æ ‡é¢˜è¿›è¡Œæ’åº

**åˆ—ä¿¡æ¯**:
- æ¯åˆ—æ˜¾ç¤ºæ•°æ®ç±»å‹ï¼ˆintã€floatã€stringã€dateï¼‰
- æ˜¾ç¤ºéç©ºå€¼æ•°é‡
- æ˜¾ç¤ºå”¯ä¸€å€¼æ•°é‡

### 2. æ•°æ®æ’åºå’Œç­›é€‰ ğŸ”

**æ’åº**:
- ç‚¹å‡»åˆ—æ ‡é¢˜è¿›è¡Œå‡åº/é™åºæ’åº
- æ”¯æŒå¤šåˆ—æ’åº

**ç­›é€‰**:
- ç‚¹å‡»åˆ—æ ‡é¢˜æ—çš„æ¼æ–—å›¾æ ‡
- è®¾ç½®ç­›é€‰æ¡ä»¶ï¼š
  - æ•°å€¼: ç­‰äºã€å¤§äºã€å°äºã€èŒƒå›´
  - æ–‡æœ¬: åŒ…å«ã€å¼€å¤´ã€ç»“å°¾ã€æ­£åˆ™
  - æ—¥æœŸ: ä¹‹å‰ã€ä¹‹åã€èŒƒå›´

**ç¤ºä¾‹ç­›é€‰**:
```
è‚¡ç¥¨ä»£ç  = "000001"  AND  æ—¥æœŸ >= "2025-12-01"
```

### 3. æ•°æ®ç»Ÿè®¡ ğŸ“Š

ç‚¹å‡» **Summary** æ ‡ç­¾æŸ¥çœ‹ï¼š

**æ•°å€¼åˆ—ç»Ÿè®¡**:
- Count (è®¡æ•°)
- Mean (å¹³å‡å€¼)
- Std (æ ‡å‡†å·®)
- Min (æœ€å°å€¼)
- 25%ã€50%ã€75% (åˆ†ä½æ•°)
- Max (æœ€å¤§å€¼)

**æ–‡æœ¬åˆ—ç»Ÿè®¡**:
- å”¯ä¸€å€¼æ•°é‡
- æœ€å¸¸è§çš„å€¼
- ç©ºå€¼æ•°é‡

### 4. æ•°æ®å¯è§†åŒ– ğŸ“ˆ

ç‚¹å‡» **Chart** æ ‡ç­¾åˆ›å»ºå›¾è¡¨ï¼š

**æ”¯æŒçš„å›¾è¡¨ç±»å‹**:
- **æŠ˜çº¿å›¾** (Line Chart) - é€‚åˆæ—¶é—´åºåˆ—
- **æŸ±çŠ¶å›¾** (Bar Chart) - é€‚åˆåˆ†ç±»æ¯”è¾ƒ
- **æ•£ç‚¹å›¾** (Scatter Plot) - é€‚åˆå…³ç³»åˆ†æ
- **ç›´æ–¹å›¾** (Histogram) - é€‚åˆåˆ†å¸ƒæŸ¥çœ‹
- **ç®±çº¿å›¾** (Box Plot) - é€‚åˆç¦»ç¾¤å€¼æ£€æµ‹

**ç¤ºä¾‹: åˆ›å»ºè‚¡ä»·èµ°åŠ¿å›¾**
1. ç‚¹å‡» "Chart"
2. é€‰æ‹© "Line Chart"
3. X è½´: date (æ—¥æœŸ)
4. Y è½´: close (æ”¶ç›˜ä»·)
5. ç‚¹å‡» "Create Chart"

### 5. æ•°æ®è½¬æ¢ ğŸ”§

ç‚¹å‡» **Operations** æŸ¥çœ‹å¯ç”¨æ“ä½œï¼š

**å¸¸ç”¨æ“ä½œ**:
- **Filter rows** - è¿‡æ»¤è¡Œ
- **Sort** - æ’åº
- **Drop duplicates** - åˆ é™¤é‡å¤
- **Select columns** - é€‰æ‹©åˆ—
- **Rename columns** - é‡å‘½ååˆ—
- **Convert types** - è½¬æ¢ç±»å‹
- **Fill missing** - å¡«å……ç©ºå€¼
- **Group by** - åˆ†ç»„èšåˆ

**ç¤ºä¾‹: è®¡ç®—æ—¥æ”¶ç›Šç‡**
1. Operations â†’ "New column"
2. è¾“å…¥å…¬å¼: `(close - close.shift(1)) / close.shift(1) * 100`
3. åˆ—å: `daily_return`
4. ç‚¹å‡» "Apply"

### 6. ä»£ç ç”Ÿæˆ ğŸ

è¿™æ˜¯ Data Wrangler æœ€å¼ºå¤§çš„åŠŸèƒ½ï¼

**è‡ªåŠ¨ç”Ÿæˆä»£ç **:
1. åœ¨ Data Wrangler ä¸­è¿›è¡Œå„ç§æ“ä½œï¼ˆç­›é€‰ã€æ’åºã€è½¬æ¢ç­‰ï¼‰
2. ç‚¹å‡» **Export** æŒ‰é’®
3. é€‰æ‹© "Python (pandas)" æˆ– "Python (polars)"
4. Data Wrangler ä¼šç”Ÿæˆå¯¹åº”çš„ Python ä»£ç 
5. ç‚¹å‡» "Insert code" å°†ä»£ç æ’å…¥åˆ°å½“å‰ Python æ–‡ä»¶

**ç¤ºä¾‹ç”Ÿæˆçš„ä»£ç **:
```python
import pandas as pd

# è¯»å–æ•°æ®
df = pd.read_parquet('data/test/test_000001.parquet')

# ç­›é€‰æ—¥æœŸ
df = df[df['date'] >= '2025-12-01']

# æŒ‰æ—¥æœŸæ’åº
df = df.sort_values('date', ascending=False)

# è®¡ç®—æ—¥æ”¶ç›Šç‡
df['daily_return'] = (df['close'] - df['close'].shift(1)) / df['close'].shift(1) * 100

print(df)
```

## å®é™…åº”ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: æŸ¥çœ‹å¹³å®‰é“¶è¡Œæœ€è¿‘èµ°åŠ¿

1. æ‰“å¼€: `data/test/test_000001.parquet`
2. åœ¨ Data Wrangler ä¸­ï¼š
   - ç‚¹å‡» date åˆ—æ’åºï¼ˆé™åºï¼‰
   - æŸ¥çœ‹æœ€è¿‘çš„äº¤æ˜“æ—¥æ•°æ®
3. åˆ›å»ºæŠ˜çº¿å›¾ï¼š
   - Chart â†’ Line Chart
   - X: date, Y: close
   - è§‚å¯Ÿä»·æ ¼èµ°åŠ¿

### ç¤ºä¾‹ 2: åˆ†ææˆäº¤é‡åˆ†å¸ƒ

1. æ‰“å¼€ä»»æ„ Parquet æ–‡ä»¶
2. é€‰æ‹© volume åˆ—
3. Chart â†’ Histogram
4. æŸ¥çœ‹æˆäº¤é‡åˆ†å¸ƒæƒ…å†µ

### ç¤ºä¾‹ 3: æ‰¾å‡ºå¼‚å¸¸æ•°æ®

1. Operations â†’ Filter
2. è®¾ç½®æ¡ä»¶: `close < 0` æˆ– `volume == 0`
3. æŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸æ•°æ®
4. Export å¯¼å‡ºæ¸…æ´—åçš„æ•°æ®

## å¿«æ·é”®

| åŠŸèƒ½ | å¿«æ·é”® |
|------|--------|
| æœç´¢/ç­›é€‰ | `Ctrl+F` |
| åˆ·æ–°æ•°æ® | `Ctrl+R` |
| è¿”å›ç¼–è¾‘å™¨ | `Esc` |
| å¯¼å‡ºä»£ç  | `Ctrl+E` |

## æ€§èƒ½æç¤º

- âœ… Data Wrangler é»˜è®¤åªåŠ è½½å‰ 1000 è¡Œï¼ˆæ€§èƒ½è€ƒè™‘ï¼‰
- âœ… å¤§æ–‡ä»¶ä¼šè‡ªåŠ¨é‡‡æ ·æ˜¾ç¤º
- âœ… æ‰€æœ‰æ“ä½œåœ¨å†…å­˜ä¸­è¿›è¡Œï¼Œä¸ä¿®æ”¹åŸæ–‡ä»¶
- âœ… ç”Ÿæˆçš„ä»£ç å¯ä»¥åº”ç”¨åˆ°å®Œæ•´æ•°æ®é›†

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆåªæ˜¾ç¤º 1000 è¡Œï¼Ÿ
A: è¿™æ˜¯ä¸ºäº†æ€§èƒ½ä¼˜åŒ–ã€‚å®é™…åˆ†ææ—¶ï¼Œå¯¼å‡ºçš„ä»£ç ä¼šåº”ç”¨åˆ°å®Œæ•´æ•°æ®é›†ã€‚

### Q: èƒ½å¦åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼Ÿ
A: å¯ä»¥ã€‚æ¯ä¸ªæ–‡ä»¶ä¼šåœ¨ç‹¬ç«‹çš„ Data Wrangler æ ‡ç­¾é¡µä¸­æ‰“å¼€ã€‚

### Q: å¦‚ä½•ä¿å­˜ä¿®æ”¹ï¼Ÿ
A: Data Wrangler ä¸ç›´æ¥ä¿®æ”¹æ–‡ä»¶ã€‚ä½¿ç”¨ Export åŠŸèƒ½ç”Ÿæˆä»£ç ï¼Œç„¶åè¿è¡Œä»£ç ä¿å­˜ç»“æœã€‚

### Q: æ”¯æŒå“ªäº›æ–‡ä»¶æ ¼å¼ï¼Ÿ
A: CSVã€TSVã€Excel (.xlsx)ã€JSONã€Parquetã€SQLite ç­‰ã€‚

### Q: å¦‚ä½•å¤„ç†å¤§æ–‡ä»¶ï¼Ÿ
A: Data Wrangler ä¼šè‡ªåŠ¨é‡‡æ ·ã€‚å»ºè®®å…ˆç”¨é‡‡æ ·æ•°æ®æ¢ç´¢ï¼Œç„¶åå¯¼å‡ºä»£ç åœ¨å®Œæ•´æ•°æ®é›†ä¸Šè¿è¡Œã€‚

## ä¸å…¶ä»–å·¥å…·å¯¹æ¯”

| åŠŸèƒ½ | Data Wrangler | ParquetViewer | DBeaver | Python |
|------|---------------|---------------|---------|--------|
| æ˜“ç”¨æ€§ | â­â­â­â­â­ | â­â­â­â­ | â­â­â­ | â­â­ |
| å¯è§†åŒ– | â­â­â­â­â­ | â­ | â­â­â­ | â­â­â­â­ |
| ä»£ç ç”Ÿæˆ | â­â­â­â­â­ | - | - | - |
| æ•°æ®è½¬æ¢ | â­â­â­â­â­ | â­ | â­â­â­â­ | â­â­â­â­â­ |
| å¤§æ–‡ä»¶ | â­â­â­ | â­â­â­â­ | â­â­â­â­â­ | â­â­â­â­â­ |
| SQL æŸ¥è¯¢ | - | - | â­â­â­â­â­ | â­â­â­â­ |

## æ€»ç»“

**Data Wrangler æœ€é€‚åˆ**:
- âœ… VS Code ç”¨æˆ·
- âœ… éœ€è¦å¿«é€Ÿæ•°æ®æ¢ç´¢
- âœ… æƒ³è¦å¯è§†åŒ–åˆ†æ
- âœ… éœ€è¦ç”Ÿæˆ Python ä»£ç 
- âœ… æ•°æ®æ¸…æ´—å’Œè½¬æ¢

**å¼€å§‹ä½¿ç”¨**:
1. å®‰è£… Data Wrangler æ‰©å±•
2. å³é”®æ‰“å¼€ `data/test/test_000001.parquet`
3. å¼€å§‹æ¢ç´¢ä½ çš„ Aè‚¡æ•°æ®ï¼

---

**ç›¸å…³æ–‡æ¡£**:
- [æŸ¥çœ‹å·¥å…·å¯¹æ¯”](VIEWING_TOOLS.md)
- [å¿«é€ŸæŸ¥çœ‹æŒ‡å—](QUICK_VIEW.md)
- [æ•°æ®å­—æ®µè¯´æ˜](DATA_FIELDS.md)
